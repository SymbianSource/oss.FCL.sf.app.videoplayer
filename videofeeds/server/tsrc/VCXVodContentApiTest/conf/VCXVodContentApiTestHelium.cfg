#-----------------------------------------------------------------------------------
#
# STIF test script file for testing service management client API.
#
# This cfg has test cases which are run when Helium generates ATS3 test drops.
# The cases are from other cfgs under the test module, if they are changed then 
# easiest way to update cases here is to run perl script in the internal tool folder.
#
#-----------------------------------------------------------------------------------

[StifSettings]
CapsModifier= IptvTestClientApiCapsMod.exe
[EndStifSettings]

[Define]
INCLUDE c:\testframework\VCXConsts.inc
INCLUDE c:\testframework\VCXErrors.inc
INCLUDE c:\testframework\VCXVodContentApiTest.inc
INCLUDE c:\testframework\VCXServiceNames.inc
INCLUDE c:\testframework\VCXServiceUpdating.inc
[Enddefine]
INCLUDE c:\testframework\VCXServiceManagementApiTest.inc


[Test]
title ET11099 <not a test> Setup vod test services

create VCXTestUtilModule Util
// Copies some known 3G AP to "Internet" destination with "Internet" name for the AP.
Util CopyMethod "Internet" "Internet" "Internet"
Util SetMethodPriority DEFAULT_DEST 3G_AP 0
Util SetUsedDestination DEFAULT_DEST
// Disable connection dialog for "Internet" destination.
Util SetConnectionMethodIntAttribute "Internet" "Internet" 507 2 // 507 is ECmSeamlessnessLevel
delete Util

pause PAUSE
create VCXServiceManagementApiTest ServUtil
ServUtil Create
ServUtil DeleteAllServices SYNC

ServUtil AddHardCodedService 	ASYNC SERVICE_0 	3G_AP 1 0  	// OOPS
ServUtil AddHardCodedService 	ASYNC SERVICE_1 	3G_AP 1 1 		// NokiaVideos
ServUtil AddHardCodedService 	ASYNC SERVICE_10 	3G_AP 1 2 		// NSeries
ServUtil AddHardCodedService 	ASYNC SERVICE_2	 	3G_AP 1 3 		// Rocketboom
ServUtil AddHardCodedService 	ASYNC SERVICE_3	 	3G_AP 1 4 		// YLE Mediasali
ServUtil AddHardCodedService 	ASYNC SERVICE_4	 	3G_AP 1 5 		// Kärppäkanava
ServUtil AddHardCodedService 	ASYNC SERVICE_5	 	3G_AP 1 6 		// Rocketboom5
ServUtil AddHardCodedService 	ASYNC SERVICE_6	 	3G_AP 1 7 		// OOPS6
ServUtil AddHardCodedService 	ASYNC SERVICE_7	 	3G_AP 1 8 		// NokiaVideos7
ServUtil AddHardCodedService 	ASYNC SERVICE_8	 	3G_AP 1 9 		// Rocketboom8

// EXTRA_SERVICE_9 is reserved for cases to change it's address at will

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/multiurl.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_1

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/mimetype_tests/allmimetypes.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_2

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/preview.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_3

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/ecg_parental_control.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_4

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/dvbtest/xmltv/xmltv_1day.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_5

ServUtil GetServices SYNC 0 250

ServUtil Destroy
delete ServUtil
pause 3000
[Endtest]

[Test]
title ET11000 UpdateEcg SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_0
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11001 GetEcgList SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test EnableVerifying ET11001
test SelectIap 3G_AP
test GetEcgList 1 "" 0 10
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11002 EcgCategoryList SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test EnableVerifying ET11002
test SelectIap 3G_AP
test EcgCategoryList 0
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11003 EcgEcgAllList SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test EnableVerifying ET11003
test SelectIap 3G_AP
test EcgEcgAllList "" 0 5
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11004 CategoryDetails SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test EnableVerifying ET11004
test SelectIap 3G_AP
test CategoryDetails 1
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11005 ParentCategory SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test SelectIap 3G_AP
test ParentCategory 0
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11006 ContentDetailsList SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test EnableVerifying ET11006
test SelectIap 3G_AP
test ContentDetailsList 0
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11047 SetLastPosition SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test SetLastPosition 0 0 0
test SetLastPosition 0 0 500
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11029 UpdateEcg again SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test Create SERVICE_0
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test EnableVerifying ET11029
test VerifyAllCategoryContent 0
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11032 Delete client while updating ECG SERVICE_1
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
//------------------------------------------
// Delete while updating ECG
create VCXVodContentApiTest test
test DeleteEpgDb
test Create SERVICE_1
test SelectIap 3G_AP
test UpdateEcg
Util WaitForConnectionActivity 3G_AP
waittestclass Util
pause 1000
test Destroy
delete test
delete Util
//------------------------------------------
// Get ECG details, fails
pause 2000
create VCXVodContentApiTest test
test Create SERVICE_1
test VerifyAllCategoryContent 0
allownextresult KIptvErrorVodNoIap // this will fail as there's no ECG in DB and no IAP selected when the client tries to start update
waittestclass test
test Destroy
delete test
//------------------------------------------
// Update ECG
pause 2000
create VCXVodContentApiTest test
test Create SERVICE_1
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test Destroy
delete test
//------------------------------------------
// Delete while updating ECG
pause 2000
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
create VCXVodContentApiTest test
test Create SERVICE_1
test SelectIap 3G_AP
test UpdateEcg
Util WaitForConnectionActivity 3G_AP
waittestclass Util
pause 1000
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11033 GetUpdateTime SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DeleteEpgDb
test Create SERVICE_0
test GetUpdateTime // database is empty
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test GetUpdateTime 1
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11034 UpdateEcg after service has changed SERVICE_0
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXServiceManagementApiTest SMUtil
SMUtil Create
create VCXVodContentApiTest test
test DeleteEpgDb

SMUtil UpdateServiceField	ASYNC SERVICE_0 	EAddress 	"http:\/\/193.65.182.78/oops.xml"

test Create SERVICE_0
pause 2000
test EnableVerifying ET11034-1
test SelectIap 3G_AP
// ECG is updated with old address
test UpdateEcg
SMUtil UpdateServiceField	ASYNC SERVICE_0 	EAddress 	"http:\/\/193.65.182.78/nseries.xml"
allownextresult EIptvDlGeneral
allownextresult KERRNONE
allownextresult KERRGENERAL
waittestclass test
test VerifyAllCategoryContent 0
test Destroy

pause PAUSE

test Create SERVICE_0
test EnableVerifying ET11034-2
test SelectIap 3G_AP
// try again, this time ECG is updated with new address
test UpdateEcg
waittestclass test
test VerifyAllCategoryContent 0
test Verify ET11034-2
test Destroy

delete test
SMUtil Destroy
delete SMUtil
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title <not a test> Setup services
pause PAUSE
create VCXServiceManagementApiTest SMUtil
SMUtil Create
SMUtil DeleteAllServices SYNC

SMUtil AddHardCodedService 	    ASYNC SERVICE_1	 	3G_AP 1 10
SMUtil UpdateServiceField		ASYNC SERVICE_1 	EAddress 	"http:\/\/193.65.182.78/nokia_vod.xml"
SMUtil UpdateServiceField		ASYNC SERVICE_1 	ESearchUrl	"http:\/\/193.65.182.78/search.php?file=nokia_vod.xml&q=#search#"
SMUtil UpdateServiceField		ASYNC SERVICE_1 	EName 		EXTRA_SERVICE_1

SMUtil AddHardCodedService 	ASYNC SERVICE_0 	3G_AP 1 0  	// OOPS
SMUtil AddHardCodedService 	ASYNC SERVICE_1 	3G_AP 1 1   // NokiaVideos
SMUtil Destroy
delete SMUtil
pause 3000
[Endtest]

[Test]
title ET11048 Automatic ECG update
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_0
test SelectIap 3G_AP

// This launches automatic update.
test GetEcgList 1 "" 0 10

Util WaitForConnectionActivity 3G_AP
waittestclass Util

waittestclass test
test GetEcgList 1 "" 0 10
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11049 No update done before - Is update needed
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_1
test UpdateAvailable 1
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11050 Last update less than hour ago - Is update needed
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_1
test SelectIap 3G_AP

// Right after update
test UpdateEcg
waittestclass test
test UpdateAvailable 0

// 59 minutes after update
Util AdvanceSystemTimeMinutes 59
test UpdateAvailable 0

test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11051 Last update over hour ago - Is update needed
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_1
test SelectIap 3G_AP

test UpdateEcg
waittestclass test

// Over hour ago
Util AdvanceSystemTimeMinutes 60
pause 1000
test UpdateAvailable 1

test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11052 Last update failed - Is update needed
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_1
test SelectIap 3G_AP

// Update succeeds
test UpdateEcg
waittestclass test

pause 2000

// Failed update
test UpdateEcg

loop 3
Util WaitForConnectionActivity 3G_AP
allowerrorcodes KERRTIMEDOUT
waittestclass Util
allowerrorcodes KERRNOTFOUND
allowerrorcodes KERRALREADYEXISTS
Util Attach 3G_AP
allowerrorcodes KERRNOTREADY
Util Terminate
endloop

allownextresult EIptvDlContentNotFound
allownextresult EIptvDlConnectionFailed
allownextresult KIptvErrorEpgUpdateFailed
waittestclass test

test UpdateAvailable 0

test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11053 Cancel update - Update available
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_1

test SelectIap 3G_AP

test SetMsgWhichToSignal KIptvVodUpdateStarted
test UpdateEcg
allownextresult KIptvVodUpdateStarted
waittestclass test
test CancelUpdate

Util WaitUntilConnectionIsClosed 3G_AP
waittestclass Util

test EnableVerifying ET11053
test VerifyAllCategoryContent 0
test VerifyAllCategoryContent KIptvTestSearchCategoryId
test UpdateAvailable 1
test Verify ET11053

test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11054 Cancel when no update
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create SERVICE_1

test CancelUpdate

test UpdateAvailable 1

test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11299 <not a test> Setup search test services

create VCXTestUtilModule Util
// Copies some known 3G AP to "Internet" destination with "Internet" name for the AP.
Util CopyMethod "Internet" "Internet" "Internet"
Util SetMethodPriority DEFAULT_DEST 3G_AP 0
Util SetUsedDestination DEFAULT_DEST
// Disable connection dialog for "Internet" destination.
Util SetConnectionMethodIntAttribute "Internet" "Internet" 507 2 // 507 is ECmSeamlessnessLevel
delete Util

pause PAUSE
create VCXServiceManagementApiTest SMTest
SMTest Create
SMTest DeleteAllServices SYNC

// nseries test search
SMTest AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
SMTest UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries.xml"
SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/193.65.182.78/search.php?file=nseries.xml&q=#search#"
SMTest UpdateServiceField		ASYNC SERVICE_9 	EName 		EXTRA_SERVICE_1

// no search address
SMTest AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
SMTest UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries.xml"
SMTest UpdateServiceField		ASYNC SERVICE_9 	EName 		EXTRA_SERVICE_2

// nseries test search, second
SMTest AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
SMTest UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries.xml"
SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/193.65.182.78/search.php?file=nseries.xml&q=#search#"
SMTest UpdateServiceField		ASYNC SERVICE_9 	EName 		EXTRA_SERVICE_3

// search url length is 256 chars
SMTest AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
SMTest UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries.xml"
SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	EAddress_256charsLongSearchUrl
SMTest UpdateServiceField		ASYNC SERVICE_9 	EName 		EXTRA_SERVICE_4

// search service with parental rating information
SMTest AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
SMTest UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/ecg_parental_control.xml"
SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/193.65.182.78/search.php?file=ecg_parental_control.xml&q=#search#"
SMTest UpdateServiceField		ASYNC SERVICE_9 	EName 		EXTRA_SERVICE_5

// search service with preview videos
SMTest AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
SMTest UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/preview.xml"
SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/193.65.182.78/search.php?file=preview.xml&q=#search#"
SMTest UpdateServiceField		ASYNC SERVICE_9 	EName 		EXTRA_SERVICE_6

//SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/video.google.com/videofeed?type=search&q=#search#&so=0&num=10&output=rss"
//SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/api.search.yahoo.com/VideoSearchService/rss/videoSearch.xml?appid=ysearchblog&adult_ok=1&results=10&format=mpeg&query=#search#"
//SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/"

SMTest GetServices SYNC 0 250

SMTest Destroy
delete SMTest
pause 3000
[Endtest]

[Test]
title ET11201 Search NSeries 3G
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create EXTRA_SERVICE_1
test SelectIap 3G_AP
test Search Amaz
waittestclass test
test EnableVerifying ET11201
test VerifyAllCategoryContent KIptvTestSearchCategoryId
test Verify ET11201
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11239 Search - GetEcgList
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DisableThumbnails
test Create EXTRA_SERVICE_1
test SelectIap 3G_AP
test Search Amaz
waittestclass test
test GetEcgList KIptvTestSearchCategoryId "" 0 10
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11240 Search - EcgCategoryList
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DisableThumbnails
test Create EXTRA_SERVICE_1
test SelectIap 3G_AP
test Search Amaz
waittestclass test
test EcgCategoryList KIptvTestSearchCategoryId
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11241 Search - CategoryDetails
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DisableThumbnails
test Create EXTRA_SERVICE_1
test EnableVerifying ET11241
test SelectIap 3G_AP
test Search Amaz
waittestclass test
test CategoryDetails KIptvTestSearchCategoryId
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11242 Search - ParentCategory
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DisableThumbnails
test Create EXTRA_SERVICE_1
test SelectIap 3G_AP
test Search Amaz
waittestclass test
test ParentCategory 0 //KIptvTestSearchCategoryId
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11243 Search - ContentDetailsList
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DisableThumbnails
test Create EXTRA_SERVICE_1
test EnableVerifying ET11243
test SelectIap 3G_AP
test Search Amaz
waittestclass test
test ContentDetailsList KIptvRssSearchContentId1
test VerifyAllCategoryContent KIptvTestSearchCategoryId
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11221 Cancel Search NSeries
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create EXTRA_SERVICE_1
test SelectIap 3G_AP

test Search Promo
pause 100
test CancelSearch

pause 60000

test VerifyAllCategoryContent KIptvTestSearchCategoryId
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11204 After Search
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DisableThumbnails
test DeleteEpgDb
test Create EXTRA_SERVICE_1
test VerifyAllCategoryContent KIptvTestSearchCategoryId
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11209 Authorization fail

pause PAUSE
create VCXServiceManagementApiTest SMTest
SMTest Create

// invalid pw
SMTest AddHardCodedService 	ASYNC SERVICE_9 	3G_AP 1 10 	// invalid service
SMTest UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries.xml"
SMTest UpdateServiceField		ASYNC SERVICE_9 	ESearchUrl	"http:\/\/193.65.182.78/search.php?file=nseries.xml&q=#search#"
SMTest UpdateServiceField 	ASYNC SERVICE_9 	EPassword 	"Invaliidipw"
SMTest UpdateServiceField 	ASYNC SERVICE_9		EName 		SERVICE_INVALID_PASSWORD

SMTest Destroy
delete SMTest
pause PAUSE

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test DisableThumbnails
test DeleteEpgDb
test Create SERVICE_INVALID_PASSWORD
test SelectIap 3G_AP
test Search Promo
allownextresult EIptvDlAuthFailed
waittestclass test
test VerifyAllCategoryContent KIptvTestSearchCategoryId
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11999 <not a test> Setup category test services

create VCXTestUtilModule Util
// Copies some known 3G AP to "Internet" destination with "Internet" name for the AP.
Util CopyMethod "Internet" "Internet" "Internet"
Util SetMethodPriority DEFAULT_DEST 3G_AP 0
Util SetUsedDestination DEFAULT_DEST
// Disable connection dialog for "Internet" destination.
Util SetConnectionMethodIntAttribute "Internet" "Internet" 507 2 // 507 is ECmSeamlessnessLevel
delete Util

pause PAUSE
create VCXServiceManagementApiTest ServUtil
ServUtil Create
ServUtil DeleteAllServices SYNC

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_1

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_cat.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_2

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_cat_unorganised.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_3

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_cat_and_channels.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_4

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_1st_channel_with_cat.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_5

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_2nd_channel_with_cat.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_6

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_20cat.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_7

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_20cat_and_3channels.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_8

ServUtil AddHardCodedService 	ASYNC SERVICE_9	 	3G_AP 1 10 	// OOPS9
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EAddress 	"http:\/\/193.65.182.78/nseries_21cat.xml"
ServUtil UpdateServiceField		ASYNC SERVICE_9 	EName 	EXTRA_SERVICE_9

ServUtil GetServices SYNC 0 250

ServUtil Destroy
delete ServUtil
pause 3000
[Endtest]

[Test]
title ET11901 UpdateEcg channels
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create EXTRA_SERVICE_1
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test EnableVerifying ET11901
test VerifyAllCategoryContent 0
test Verify ET11901
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11902 UpdateEcg categories
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create EXTRA_SERVICE_2
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test EnableVerifying ET11902
test VerifyAllCategoryContent 0
test Verify ET11902
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11903 UpdateEcg categories unorganized
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create EXTRA_SERVICE_3
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test EnableVerifying ET11903
test VerifyAllCategoryContent 0
test Verify ET11903
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

[Test]
title ET11904 UpdateEcg categories and channels
create VCXTestUtilModule Util
Util CreateMobilecrashWatcher
pause PAUSE
create VCXVodContentApiTest test
test EnableThumbnails
test DeleteEpgDb
test Create EXTRA_SERVICE_4
test SelectIap 3G_AP
test UpdateEcg
waittestclass test
test EnableVerifying ET11904
test VerifyAllCategoryContent 0
test Verify ET11904
test Destroy
delete test
Util CheckMobilecrashes
delete Util
[Endtest]

