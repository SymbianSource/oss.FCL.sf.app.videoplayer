[Define]

EFalse 0
ETrue  1

ENoPath 0
EAddPath 1

ELocalFile     0
ESdpFile       1
ERamFile       2
EUrl           3
EAsxFile       4          
EMultiLinkFile 5 

StandAlone 0
Embedded 1

DownloadId_1 3
DownloadId_2 5

SameFile 0
NewFile 1
NewFileAfterError 2

NO_AP     0
AP_GPRS_1 3
AP_GPRS_2 4
AP_WLAN_1 5
AP_WLAN_2 6
AP_SNAP   7
AP_QUERY  8
AP_QUERY2 9

LocalLinks     0
StreamingLinks 1

EPlayerChanged 10

UseName 0
UseHandle 1

EPathChanged 4
EMcPathChangedByOpen 0

EMcItemOpened 0
EMcContainerOpened 1

ViewDepth_1 1
ViewDepth_2 2

ENoMsg -5
ENotification 1
EMatrix 4

ELaunchVideo 1
EOpenVideoStorage 2
EOpenInternetVideos 3

EApaCommandTail 0
EApaCommandOpen 1
EApaCommandRun  2

KErrNotFound -1
KErrCancel -3

EMulti  0
ESingle 1

EUndefined 0
EDefined   1

[Enddefine]

[Test]
//
//  Test the terminate message from the Generic Param List
//
title 1) AppUiEngine Generic Parameters - Terminate
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest CreateGenericParametersTerminate
enginetest OpenFile UseHandle local.3gp EAddPath ELocalFile
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the embedded PDL test cases
//  - Launch an embedded PDL playback
//  - Handle a message from the Browser for the same clip
//  - Handle a message from the Browser to play a new download
//  - Handle a message to clear the PDL information
//  - Handle a message from the Browser to play a new download
//
title 2) AppUiEngine Embedded PDL
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest OpenFileEmbeddedPdl DownloadId_1 local.3gp EAddPath
enginetest HandleMessageEmbeddedPdl SameFile
enginetest HandleMessageEmbeddedPdl NewFile DownloadId_2 local.3gp EAddPath
enginetest ClearPdlInformation
enginetest HandleMessageEmbeddedPdl NewFileAfterError DownloadId_2 local.3gp EAddPath
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the OpenFile with a file handle API
//  - No GenericParameters
//  - Launch an embedded SDP file
//
title 3) AppUiEngine OpenFile w/ File Handle - SDP
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseHandle sdp_test.sdp EAddPath ESdpFile AP_GPRS_1
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the OpenFile with a file handle API
//  - No GenericParameters
//  - Launch an embedded RAM file with streaming links 
//
title 4) AppUiEngine OpenFile w/ File Handle - RAM file
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseHandle test_streaming.ram EAddPath ERamFile AP_GPRS_1 StreamingLinks
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the OpenFile with a file handle API
//  - No GenericParameters
//  - Launch an embedded RAM file with local links 
//
title 5) AppUiEngine OpenFile w/ File Handle - RAM file
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseHandle test_local.ram EAddPath ERamFile AP_GPRS_1 LocalLinks
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the Access Point Selection with OpenFile file handle API
//  - Default GPRS Access Point
//  - GenericParameters with WLAN Access Point
//  - Launch an embedded SDP file
//  - WLAN access point should be used
//
title 6) AppUiEngine Access Point Selection 
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest SetGenericParamAccessPoint AP_WLAN_1
enginetest OpenFile UseHandle sdp_test.sdp EAddPath ESdpFile AP_WLAN_1
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the Access Point Selection with OpenFile file handle API
//  - Default GPRS Access Point
//  - GenericParameters with GPRS Access Point
//  - Launch an embedded SDP file
//  - Default access point should be used
//
title 7) AppUiEngine Access Point Selection
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest SetGenericParamAccessPoint AP_GPRS_2
enginetest OpenFile UseHandle sdp_test.sdp EAddPath ESdpFile AP_GPRS_1
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the Access Point Selection with OpenFile file handle API
//  - No Default Access Point
//  - GenericParameters with GPRS Access Point
//  - Launch an embedded SDP file
//  - Default access point should be used
//
title 8) AppUiEngine Access Point Selection
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint NO_AP
enginetest SetGenericParamAccessPoint AP_GPRS_2
enginetest OpenFile UseHandle sdp_test.sdp EAddPath ESdpFile AP_GPRS_2
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the Access Point Selection with OpenFile file handle API
//  - No Default Access Point
//  - No GenericParameters 
//  - Launch an embedded SDP file
//  - Use the Internet SNAP Access Point for STIF Testing
//
title 9) AppUiEngine Access Point Selection
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint NO_AP
enginetest SetQueryAccessPoint AP_SNAP
enginetest OpenFile UseHandle sdp_test.sdp EAddPath ESdpFile AP_SNAP
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the OpenFile with a file name API
//  - Launch a local clip
//
title 10) AppUiEngine OpenFile w/ File Name - Local
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest OpenFile UseName local.3gp EAddPath ELocalFile
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the OpenFile with a file name API
//  - No GenericParameters
//  - Launch an SDP file
//
title 11) AppUiEngine OpenFile w/ File Name - SDP
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseName sdp_test.sdp EAddPath ESdpFile AP_GPRS_1
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the OpenFile with a file name API
//  - No GenericParameters
//  - Launch an RAM file with streaming links 
//
title 12) AppUiEngine OpenFile w/ File Name - RAM file
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseName test_streaming.ram EAddPath ERamFile AP_GPRS_1 StreamingLinks
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the OpenFile with a file name API
//  - No GenericParameters
//  - Launch an URL
//  - Test the PrepareCloseMpx API
//
title 13) AppUiEngine OpenFile w/ URL
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseName rtsp:\/\/stream.3gp ENoPath EUrl AP_GPRS_1
enginetest PrepareCloseMpx
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the StartStandAloneL method
//
title 14) AppUiEngine StartStandAloneL
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest StartStandAlone
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the HandleCollectionMessage method
//
title 15) AppUiEngine HandleCollectionMessage
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest HandleCollectionMessage EPathChanged EMcPathChangedByOpen EMcItemOpened 
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the HandleCollectionMedia method
//
title 16) AppUiEngine HandleCollectionMedia
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest HandleCollectionMedia local.3gp EAddPath
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the HandleSoftKeyBackL Method
//  - Set the view depth to 1
//  - Call HandleSoftKeyL
//  - AppUi should receive and exit
//
//  - Set the view depth to 2
//  - Call HandleSoftKeyL
//  - AppUi should StepBackCollectionPathL
//
title 17) AppUiEngine HandleSoftkeyBackL
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest HandleSoftkeyBack ViewDepth_1
waittestclass enginetest
enginetest HandleSoftkeyBack ViewDepth_2
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test HandleOpenL Method with Playlist
//  - Create a Playlist
//  - Call HandleOpenL
//  - PlaybackUtility should receive InitL with Playlist
//
title 18) AppUiEngine HandleOpenPlaylist
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest StartStandAlone
enginetest HandleOpenPlaylist
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test HandleOpenL Method with CMPXMedia
//  - Create CMPXMedia
//  - Call HandleOpenL
//  - CollectionUtility should receive OpenL with new collection path
//
title 19) AppUiEngine HandleOpenMedia
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest StartStandAlone
enginetest HandleOpenMedia
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test ProcessActivationMessageL
//  - Test with small Message, function Leaves
//  - Test with Open Internet Videos, View Utility receives view activation
//  - Test with Open Video Storage, View Utility receives view activation
//  - Test with Matrix Launch Video, local file callbacks are received
//  - Test with Notification Launch Video, local file callbacks are received
//
title 20) AppUiEngine ProcessActivationMessageL
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest StartStandAlone
enginetest ProcessActivationMessage ENoMsg
enginetest ProcessActivationMessage EMatrix EOpenInternetVideos
enginetest ProcessActivationMessage EMatrix EOpenVideoStorage
enginetest ProcessActivationMessage EMatrix ELaunchVideo local.3gp EAddPath EDefined
enginetest ProcessActivationMessage EMatrix ELaunchVideo local.3gp EAddPath EUndefined
allownextresult KErrNotFound
enginetest ProcessActivationMessage EMatrix ELaunchVideo not_fuond.3gp EAddPath EDefined
enginetest ProcessActivationMessage EMatrix ELaunchVideo not_fuond.3gp EAddPath EUndefined
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test HandleViewActivation
//  - No callback is received
//
title 21) AppUiEngine HandleViewActivation
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest StartStandAlone
enginetest HandleViewActivation
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test ProcessCommandParametersL
//  - Call ProcessCommandParameters with a tail
//      - View Utility receives view activation
//      - file exists is false
//  - Call ProcessCommandParameters without a tail
//      - Open with run command
//          - stand alone player is started
//          - file exists is false
//      - Open with document name and streaming link
//          - file exists is true
//      - Open with document name and local file
//          - file exists is true
//      - Open with document name and file that doesn't exist
//          - file exists is false
//
title 22) AppUiEngine ProcessCommandParameters
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest ProcessCommandParameters EApaCommandTail EMatrix EOpenVideoStorage
enginetest ProcessCommandParameters EApaCommandRun
enginetest ProcessCommandParameters EApaCommandOpen rtsp:\/\/stream.3gp ENoPath ETrue
enginetest ProcessCommandParameters EApaCommandOpen local.3gp EAddPath ETrue
enginetest ProcessCommandParameters EApaCommandOpen badname.3gp EAddPath EFalse
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test Access Point Dialog withSelection
//  - No GenericParameters 
//  - No Default Access Point
//  - Set Query Access Point to 0 to simulate a cancel button press
//  - Launch an embedded SDP file
//  - OpenFile leaves with KErrCancel
//
title 23) AppUiEngine Access Point Selection
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint NO_AP
enginetest SetQueryAccessPoint AP_QUERY
enginetest OpenFile UseHandle sdp_test.sdp EAddPath ESdpFile AP_QUERY2
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test Access Point Dialog Cancel without Selection
//  - No GenericParameters 
//  - No Default Access Point
//  - Set Query Access Point to 0 to simulate a cancel button press
//  - Launch an embedded SDP file
//  - OpenFile leaves with KErrCancel
//
title 24) AppUiEngine Access Point Selection
create mpxvideoplayertest enginetest
enginetest CreateEngine Embedded
enginetest SetDefaultAccessPoint NO_AP
enginetest SetQueryAccessPoint NO_AP
enginetest OpenFile UseHandle sdp_test.sdp EAddPath ESdpFile KErrCancel
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test Playlist functionality
//  Open Multilink ram file 
//  HandleCollectionMessage for playlist 
//
title 25) AppUiEngine HandleCollectionMessage RAM Playlist 
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseHandle test_multilocal.ram EAddPath EMultiLinkFile AP_GPRS_1 LocalLinks 
enginetest HandleCollectionMessage EPathChanged EMcPathChangedByOpen EMcContainerOpened
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test Playlist functionality
//  Open Multilink ASX file 
//  HandleCollectionMessage for playlist 
//
title 26) AppUiEngine HandleCollectionMessage ASX Playlist 
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseHandle test_multilink_v2.asx EAddPath EMultiLinkFile AP_GPRS_1 StreamingLinks 
enginetest HandleCollectionMessage EPathChanged EMcPathChangedByOpen EMcContainerOpened
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test Playlist functionality
//  Open Multilink ASX file 
//  HandleCollectionMessage for playlist 
//
title 27) AppUiEngine UpdatePbPluginMediaL ASX V3 
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenFile UseHandle test_seekSingle_v3.asx EAddPath EAsxFile AP_GPRS_1 StreamingLinks 
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test OpenMediaL functionality
//  Open valid Media  
//
title 28) AppUiEngine OpenMediaL 
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenMedia local.3gp EAddPath
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test OpenMediaL functionality
//  Open bad Media  
//
title 29) AppUiEngine OpenMediaL bad file path
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest SetDefaultAccessPoint AP_GPRS_1
enginetest OpenMedia no_existing_file.ram EAddPath
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test View Depth functionality
//
title 30) AppUiEngine GetView Depth
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest GetViewDepth ViewDepth_2
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the Video Center PDL test cases
//  - Launch a stand alone instance of engine
//  - Handle a message to start feeds PDL playback
//
title 31) AppUiEngine Feeds PDL
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest HandleCollectionMedia local.3gp EAddPath DownloadId_1 
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the handling of messages
//
title 32) AppUiEngine Messages
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest HandleMessageActivationMessageL ENoMsg EOpenInternetVideos EFalse
enginetest HandleMessageActivationMessageL EMatrix EOpenInternetVideos EFalse
delete enginetest
pause 1000
[Endtest]

[Test]
//
//  Test the handling of messages
//  -  Set the active view type to playback view type
//  -  Send Message from KVideoPlayerVodStartPlayer
//  -  Message should be ignored
//
title 33) AppUiEngine Messages
create mpxvideoplayertest enginetest
enginetest CreateEngine StandAlone
enginetest HandleMessageActivationMessageL ENoMsg EOpenInternetVideos ETrue
enginetest HandleMessageActivationMessageL EMatrix EOpenInternetVideos ETrue
delete enginetest
pause 1000
[Endtest]

