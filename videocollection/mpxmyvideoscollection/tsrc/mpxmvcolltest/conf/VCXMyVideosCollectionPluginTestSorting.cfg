#-----------------------------------------------------------------------------------
#
# STIF test script file for testing VCXMyVideosCollectionPluginTest.dll
#
# Tests functionality for sorting video files.
#
#-----------------------------------------------------------------------------------

[StifSettings]
CapsModifier= IptvTestClientApiCapsMod.exe
[EndStifSettings]

[Define]
INCLUDE c:\TestFramework\VCXMVCollectionPluginTest.inc
INCLUDE c:\TestFramework\VCXDrives.inc
INCLUDE c:\TestFramework\VCXConsts.inc
INCLUDE c:\TestFramework\VCXErrors.inc
[Enddefine]

#-----------------------------------------------------------------------------------
# Sub Cleanup
# Removes all videos from the phone. Collection is opened.
#-----------------------------------------------------------------------------------
[Sub Cleanup]
print cleanup start
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

VCXMV RemoveAllMedia
VCXMV CheckMediaCount ANY_DRIVE 0

print Cleanup OK!
delete VCXMV

print wait 3min
pause 180000
print cleanup end
[EndSub]
#-----------------------------------------------------------------------------------

#-----------------------------------------------------------------------------------
# Sub SetupVideos
# Creates 3 videos to drive defined by constant C_DRIVE. Creation and modified
# dates are set at file creation. Videos listed in creation order:
#   3.mp4, attributes: title: c, size 51000 bytes
#   1.mp4, attributes: title: a, size 49000 bytes
#   2.mp4, attributes: title: b, size 50000 bytes
# Parameters:
#  OPTION_ORIGIN origin attribute for videos
#-----------------------------------------------------------------------------------
[Sub SetupVideos]
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "1.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "2.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "3.mp4"
pause 1000

VCXMV SetAutomaticRefresh 0

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 50000
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin OPTION_ORIGIN
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 49000
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin OPTION_ORIGIN
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 51000
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin OPTION_ORIGIN
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV SetAutomaticRefresh 1

delete VCXMV
[EndSub]

#------------------------------------------------------------------------------------
#
#  Does configuration for cases in this script.
#  Creates 'Internet' IAP into 'Internet' destination and sets connection as authorized.
#  Sets preferred memory to first used drive and sorting order to none.
#  Removes all video files from the device.
#
#------------------------------------------------------------------------------------
[Test]
title ET30800 <not a test> Setup

create VCXTestUtilModule Util

// Copies some known 3G AP to "Internet" destination with "Internet" name for the AP.
Util CopyMethod "Internet" "Internet" "Internet"
// Disable connection dialog for "Internet" destination.
Util SetConnectionMethodIntAttribute "Internet" "Internet" 507 2 // 507 is ECmSeamlessnessLevel
delete Util

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetPreferredMemory E_DRIVE
VCXMV SetSortingOrder EVcxMyVideosSortingNone
delete VCXMV

callsub Cleanup

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests getting video list of category 'All videos' when videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30801 EVcxMyVideosAllVideos - EVcxMyVideosSortingNone

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count. Order can be anything.
VCXMV CheckMediaCount ANY_DRIVE 3

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests getting video list of category 'All videos' when videos are sorted by ID.
#
#------------------------------------------------------------------------------------
[Test]
title ET30802 EVcxMyVideosAllVideos - EVcxMyVideosSortingId

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order
VCXMV CheckMediaCount ANY_DRIVE 3
VCXMV GetAllMediaFullDetails

// SORTING ORDER NOT SUPPORTED

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests getting video list of category 'All videos' when videos are sorted by creation date.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30803 EVcxMyVideosAllVideos - EVcxMyVideosSortingCreationDate

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check video sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3
VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests getting video list of category 'All videos' when videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30804 EVcxMyVideosAllVideos - EVcxMyVideosSortingModified

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check order

// ORDER NOT SUPPORTED SO NO CHECKING!

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "e"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests getting video list of category 'All videos' when videos are sorted by name.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30805 EVcxMyVideosAllVideos - EVcxMyVideosSortingName

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests getting video list of category 'All videos' when videos are sorted by size.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30806 EVcxMyVideosAllVideos - EVcxMyVideosSortingSize

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is removed
#  and videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30813 EVcxMyVideosAllVideos - EVcxMyVideosSortingName, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is removed
#  and videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30814 EVcxMyVideosAllVideos - EVcxMyVideosSortingNone, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is removed
#  and videos are sorted by ID.
#
#------------------------------------------------------------------------------------
[Test]
title ET30815 EVcxMyVideosAllVideos - EVcxMyVideosSortingId, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// ORDER NOT SUPPORTED, NO CHECKING

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is removed
#  and videos are sorted by creation date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30816 EVcxMyVideosAllVideos - EVcxMyVideosSortingCreationDate, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is removed
#  and videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30817 EVcxMyVideosAllVideos - EVcxMyVideosSortingModified, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// NOT SUPPORTED SO NO CHECKING

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is removed
#  and videos are sorted by size.
#
#------------------------------------------------------------------------------------
[Test]
title ET30818 EVcxMyVideosAllVideos - EVcxMyVideosSortingSize, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is modifed
#  so that order changes and videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30819 EVcxMyVideosAllVideos - EVcxMyVideosSortingName, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "a"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is modifed
#  and videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30820 EVcxMyVideosAllVideos - EVcxMyVideosSortingNone, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 11

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "x"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is modifed
#  and videos are sorted by id.
#
#------------------------------------------------------------------------------------
[Test]
title ET30821 EVcxMyVideosAllVideos - EVcxMyVideosSortingId, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

VCXMV GetAllMediaFullDetails

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 11

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "x"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is modifed
#  and videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30822 EVcxMyVideosAllVideos - EVcxMyVideosSortingModified, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// NOT SUPPORTED SO NO CHECKING

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when video is modifed
#  so that order changes and videos are sorted by size.
#
#------------------------------------------------------------------------------------
[Test]
title ET30823 EVcxMyVideosAllVideos - EVcxMyVideosSortingSize, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// The test case

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a" // 49k
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c" // 50k
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b" // 51k

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 48000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 60000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "a"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 40000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when sorting order
#  changes because video is added by sideloading. Videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30824 EVcxMyVideosAllVideos - EVcxMyVideosSortingName, sideload video

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video3.mp4" 52000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video0.mp4" 50000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video2.mp4" 51000
pause 1000

delete VCXMV

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

// Sideload video

VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video1.mp4"

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 3 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when sorting order
#  changes because video is added by download. Videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30825 EVcxMyVideosAllVideos - EVcxMyVideosSortingName, download video

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small3.mp4" 52000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small2.mp4" 50000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small0.mp4" 51000
pause 1000

delete VCXMV

// Get videos sorted
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "small0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "small2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "small3"

// Download video

VCXMV Download 3G_AP SERVICE_SMALLVIDEOS 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV // Dl complete

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "small0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "small1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "small2"
VCXMV CheckMediaDetail ANY_DRIVE 3 EVcxTestMapping_KMPXMediaGeneralTitle "small3"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30831 EVcxMyVideosDownloads - EVcxMyVideosSortingNone

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count. Order can be anything.
VCXMV CheckMediaCount ANY_DRIVE 3

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when videos are sorted by id.
#
#------------------------------------------------------------------------------------
[Test]
title ET30832 EVcxMyVideosDownloads - EVcxMyVideosSortingId

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order
VCXMV CheckMediaCount ANY_DRIVE 3
VCXMV GetAllMediaFullDetails

// SORTING ORDER NOT SUPPORTED

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when videos are sorted by creation date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30833 EVcxMyVideosDownloads - EVcxMyVideosSortingCreationDate

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check video sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3
VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30834 EVcxMyVideosDownloads - EVcxMyVideosSortingModified

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check order

// ORDER NOT SUPPORTED SO NO CHECKING!

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "e"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30835 EVcxMyVideosDownloads - EVcxMyVideosSortingName

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when videos are sorted by size.
#
#------------------------------------------------------------------------------------
[Test]
title ET30836 EVcxMyVideosDownloads - EVcxMyVideosSortingSize

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is
#  removed and videos are sorted by name.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30843 EVcxMyVideosDownloads - EVcxMyVideosSortingName, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is
#  removed and videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30844 EVcxMyVideosDownloads - EVcxMyVideosSortingNone, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is
#  removed and videos are sorted by ID.
#
#------------------------------------------------------------------------------------
[Test]
title ET30845 EVcxMyVideosDownloads - EVcxMyVideosSortingId, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// ORDER NOT SUPPORTED, NO CHECKING

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is
#  removed and videos are sorted by creation date.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30846 EVcxMyVideosDownloads - EVcxMyVideosSortingCreationDate, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is
#  removed and videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30847 EVcxMyVideosDownloads - EVcxMyVideosSortingModified, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// NOT SUPPORTED SO NO CHECKING

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is
#  removed and videos are sorted by size.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30848 EVcxMyVideosDownloads - EVcxMyVideosSortingSize, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when sorting order
#  changes because video is modified. Videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30849 EVcxMyVideosDownloads - EVcxMyVideosSortingName, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "a"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is modified.
#  Videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30850 EVcxMyVideosDownloads - EVcxMyVideosSortingNone, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 11

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "x"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is modified.
#  Videos are sorted by ID.
#
#------------------------------------------------------------------------------------
[Test]
title ET30851 EVcxMyVideosDownloads - EVcxMyVideosSortingId, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

VCXMV GetAllMediaFullDetails

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 11

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "x"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is modified.
#  Videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30852 EVcxMyVideosDownloads - EVcxMyVideosSortingModified, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// NOT SUPPORTED SO NO CHECKING

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when video is modified
#  causing sorting order to change. Videos are sorted by size.
#
#------------------------------------------------------------------------------------
[Test]
title ET30853 EVcxMyVideosDownloads - EVcxMyVideosSortingSize, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// The test case

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a" // 49k
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c" // 50k
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b" // 51k

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 48000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 60000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "a"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 40000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when sorting order
#  changes because video is added by sideloading. Videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30854 EVcxMyVideosDownloads - EVcxMyVideosSortingName, sideload video

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video3.mp4" 52000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video0.mp4" 50000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video2.mp4" 51000
pause 1000

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

delete VCXMV

// List videos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

delete VCXMV

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

// Sideload video

VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video1.mp4"

// It's not downloaded video.
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Downloads' when sorting order
#  changes because video is added by download. Videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30855 EVcxMyVideosDownloads - EVcxMyVideosSortingName, download video

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small3.mp4" 52000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small2.mp4" 50000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small0.mp4" 51000
pause 1000

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

delete VCXMV

// Get videos sorted
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "small0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "small2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "small3"

// Download video

VCXMV Download 3G_AP SERVICE_SMALLVIDEOS 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV // Dl complete

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "small0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "small1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "small2"
VCXMV CheckMediaDetail ANY_DRIVE 3 EVcxTestMapping_KMPXMediaGeneralTitle "small3"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30861 EVcxMyVideosOther - EVcxMyVideosSortingNone

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count. Order can be anything.
VCXMV CheckMediaCount ANY_DRIVE 3

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when videos are sorted by ID.
#
#------------------------------------------------------------------------------------
[Test]
title ET30862 EVcxMyVideosOther - EVcxMyVideosSortingId

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order
VCXMV CheckMediaCount ANY_DRIVE 3
VCXMV GetAllMediaFullDetails

// SORTING ORDER NOT SUPPORTED

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when videos are sorted by creation date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30863 EVcxMyVideosOther - EVcxMyVideosSortingCreationDate

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Check video sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3
VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30864 EVcxMyVideosOther - EVcxMyVideosSortingModified

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Check order

// ORDER NOT SUPPORTED SO NO CHECKING!

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "e"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30865 EVcxMyVideosOther - EVcxMyVideosSortingName

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Check sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when videos are sorted by size.
#
#------------------------------------------------------------------------------------
[Test]
title ET30866 EVcxMyVideosOther - EVcxMyVideosSortingSize

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is removed
#  and videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30873 EVcxMyVideosOther - EVcxMyVideosSortingName, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is removed
#  and videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30874 EVcxMyVideosOther - EVcxMyVideosSortingNone, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is removed
#  and videos are sorted by ID.
#
#------------------------------------------------------------------------------------
[Test]
title ET30875 EVcxMyVideosOther - EVcxMyVideosSortingId, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// ORDER NOT SUPPORTED, NO CHECKING

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is removed
#  and videos are sorted by creation date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30876 EVcxMyVideosOther - EVcxMyVideosSortingCreationDate, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is removed
#  and videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30877 EVcxMyVideosOther - EVcxMyVideosSortingModified, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// NOT SUPPORTED SO NO CHECKING

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is removed
#  and videos are sorted by size.
#
#------------------------------------------------------------------------------------
[Test]
title ET30878 EVcxMyVideosOther - EVcxMyVideosSortingSize, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is modifed
#  so that order changes and videos are sorted by name.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30879 EVcxMyVideosOther - EVcxMyVideosSortingName, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "a"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is modifed
#  and videos are sorted by nothing.
#
#------------------------------------------------------------------------------------
[Test]
title ET30880 EVcxMyVideosOther - EVcxMyVideosSortingNone, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 11

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "x"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is modifed
#  and videos are sorted by id.
#
#------------------------------------------------------------------------------------
[Test]
title ET30881 EVcxMyVideosOther - EVcxMyVideosSortingId, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingId

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

VCXMV GetAllMediaFullDetails

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 11

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "x"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is modifed
#  and videos are sorted by modified date.
#
#------------------------------------------------------------------------------------
[Test]
title ET30882 EVcxMyVideosOther - EVcxMyVideosSortingModified, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Get videos sorted
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingModified

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

// NOT SUPPORTED SO NO CHECKING

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

//VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
//VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
//VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when video is modifed
#  so that order changes and videos are sorted by size.
#
#------------------------------------------------------------------------------------
[Test]
title ET30883 EVcxMyVideosOther - EVcxMyVideosSortingSize, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// The test case

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a" // 49k
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c" // 50k
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b" // 51k

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 48000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 60000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "a"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 40000
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'Other' when sorting order
#  changes because video is added by sideloading. Videos are sorted by name.
#
# CaseClass: core
#------------------------------------------------------------------------------------
[Test]
title ET30884 EVcxMyVideosOther - EVcxMyVideosSortingName, sideload video

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video3.mp4" 52000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video0.mp4" 50000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video2.mp4" 51000
pause 1000

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

delete VCXMV

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

// Sideload video

VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video1.mp4"

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 3 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that video list is in correct order in category 'All videos' when sorting order
#  changes because video is added by download. Videos are sorted by name.
#
#------------------------------------------------------------------------------------
[Test]
title ET30885 EVcxMyVideosOther - EVcxMyVideosSortingName, download video

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small3.mp4" 52000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small2.mp4" 50000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "small0.mp4" 51000
pause 1000

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

delete VCXMV

// Get videos sorted
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "small0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "small2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "small3"

// Download video

VCXMV Download 3G_AP SERVICE_SMALLVIDEOS 1 0 "mediacharger" "Buran_9o"
pause 60000 // pause for a minute and hope download succeeds

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "small0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "small2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "small3"

print OK!
delete VCXMV
[Endtest]
