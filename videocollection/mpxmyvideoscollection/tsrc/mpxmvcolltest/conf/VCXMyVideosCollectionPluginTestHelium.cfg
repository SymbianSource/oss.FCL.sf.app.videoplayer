#-----------------------------------------------------------------------------------
#
# STIF test script file for testing service management client API.
#
# This cfg has test cases which are run when Helium generates ATS3 test drops.
# The cases are from other cfgs under the test module, if they are changed then 
# easiest way to update cases here is to run perl script in the internal tool folder.
#
#-----------------------------------------------------------------------------------

[StifSettings]
CapsModifier= IptvTestClientApiCapsMod.exe
[EndStifSettings]

[Define]
INCLUDE c:\TestFramework\VCXMVCollectionPluginTest.inc
INCLUDE c:\TestFramework\VCXDrives.inc
INCLUDE c:\TestFramework\VCXConsts.inc
INCLUDE c:\TestFramework\VCXErrors.inc
[Enddefine]

[Sub Cleanup]
print cleanup start
create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV RemoveAllMedia

delete VCXMV
pause 2000
print cleanup end
[EndSub]
[Sub SetupVideos]

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "a.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "b.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "c.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "d.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "e.mp4"

pause 10000

VCXMV GetAllMediaFullDetails

VCXMV SetAutomaticRefresh 0

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 3
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 4
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

delete VCXMV
[EndSub]

[Test]
title ET30200 <not a test> Setup

create VCXTestUtilModule Util

// Copies some known 3G AP to "Internet" destination with "Internet" name for the AP.
Util CopyMethod "Internet" "Internet" "Internet"
// Disable connection dialog for "Internet" destination.
Util SetConnectionMethodIntAttribute "Internet" "Internet" 507 2 // 507 is ECmSeamlessnessLevel
delete Util

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetPreferredMemory E_DRIVE
VCXMV SetSortingOrder EVcxMyVideosSortingNone

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV RemoveAllMedia

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 0
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30207 Sideload video while category is open.

callsub Cleanup

// TESTCASE START

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"

VCXMV CheckMediaCount ANY_DRIVE 1
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30208 Sideload video 1st drive

callsub Cleanup

// TESTCASE START

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"

pause PAUSE_SIDELOAD

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 1
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
print OK!
delete VCXMV
[Endtest]

[Test]
title ET30209 Get sideloaded video details 1st drive
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetMediaFullDetails ANY_DRIVE 0

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30210 Delete sideloaded video 1st drive
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV DeleteFileOfMedia ANY_DRIVE 0

pause PAUSE_SIDELOAD

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 0
print OK!
delete VCXMV
[Endtest]

[Test]
title ET30214 Sideload multiple videos

callsub Cleanup

// TESTCASE START

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video1.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video2.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video3.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video4.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video5.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video6.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video7.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video8.mp4"
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video9.mp4"

pause PAUSE_SIDELOAD

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 10
print OK!
delete VCXMV
[Endtest]

[Test]
title ET30909 Delete a media from 1st drive

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video0.mp4"

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 1
VCXMV CheckMediaCount E_DRIVE 0

VCXMV DeleteMedia C_DRIVE 0 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDeleteResp KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDeleteStarted KVCXMYVideosTestMessageMpxItemDeleted KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 0
VCXMV CheckMediaCount E_DRIVE 0

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30903 Delete multiple medias

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video.mp4" 50000 5

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideo3Gp E_DRIVE "video.mp4" 50000 5

VCXMV CheckMediaCount C_DRIVE 5
VCXMV CheckMediaCount E_DRIVE 5

VCXMV DeleteMedias ANY_DRIVE 0 10 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDeleteResp KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDeleteStarted KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CoolDown

VCXMV CheckMediaCount C_DRIVE 0
VCXMV CheckMediaCount E_DRIVE 0

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30907 Cancel delete

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video.mp4" 50000 30

VCXMV SetQuietMode 1

VCXMV CheckMediaCount C_DRIVE 30
VCXMV CheckMediaCount E_DRIVE 0

pause 60000 // Wait for MDS to scan the files and maybe thumbnail generation

VCXMV CancelNextOperation
VCXMV DeleteMedias C_DRIVE 0 30 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandCanceled
waittestclass VCXMV

VCXMV CoolDown

VCXMV SetQuietMode 0

// Check that all videos have not been deleted
VCXMV CheckMinimumMediaCount C_DRIVE 10
VCXMV CheckMediaCount E_DRIVE 0

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30701 Move from 1st to 2nd drive

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"

VCXMV CheckMediaCount C_DRIVE 1
VCXMV CheckMediaCount E_DRIVE 0

VCXMV MoveMedia C_DRIVE 0 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMoveResp KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageCopyOrMoveStarted
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 0
VCXMV CheckMediaCount E_DRIVE 1

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30702 Check attributes of moved file

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"

// Update attributes
// Sets all possible attributes of video.
VCXMV CreateCopyOfMedia ANY_DRIVE 0

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "a"

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralDate 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 3
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralMimeType "d"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDate 4
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginTvRecording

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 1
VCXMV CheckMediaCount E_DRIVE 0

VCXMV MoveMedia C_DRIVE 0 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMoveResp KVCXMYVideosTestMessageCopyOrMoveStarted KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 0
VCXMV CheckMediaCount E_DRIVE 1

// Check attributes

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
// Size is set to right size of the file after move.
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
// General date is read-only.
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralDate 3
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralFlags 3
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralCopyright "c"
// Mime type is read-only.
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralMimeType "d"
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosModifiedDate 4
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosDownloadId 0
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginTvRecording

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30707 Move multiple

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video.mp4" 50000 10

VCXMV CheckMediaCount C_DRIVE 10
VCXMV CheckMediaCount E_DRIVE 0

VCXMV MoveMedias C_DRIVE 0 5 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMoveResp KVCXMYVideosTestMessageCopyOrMoveStarted KVCXMYVideosTestMessageCommandComplete
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 5
VCXMV CheckMediaCount E_DRIVE 5

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30711 Cancel move

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video.mp4" 70000 30

VCXMV CheckMediaCount C_DRIVE 30
VCXMV CheckMediaCount E_DRIVE 0

VCXMV CancelNextOperation
VCXMV MoveMedias C_DRIVE 0 30 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandCanceled
waittestclass VCXMV

VCXMV CoolDown

// Check that all videos have not been moved
VCXMV CheckMinimumMediaCount C_DRIVE 5

VCXMV CheckMediaCount ANY_DRIVE 30

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30751 Copy from 1st to 2nd drive

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"

VCXMV CheckMediaCount C_DRIVE 1
VCXMV CheckMediaCount E_DRIVE 0

VCXMV CopyMedia C_DRIVE 0 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCopyResp KVCXMYVideosTestMessageCopyOrMoveStarted KVCXMYVideosTestMessageCollectionItemChanged KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageCollectionItemChanged KVCXMYVideosTestMessageCollectionCategoryChanged
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 1
VCXMV CheckMediaCount E_DRIVE 1

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30752 Check attributes of copied file

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"

pause 10000

// Update attributes
// Sets all possible attributes of video.
VCXMV CreateCopyOfMedia ANY_DRIVE 0

VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralDate 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 3
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralCopyright "c"
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralMimeType "d"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDate 4
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosDownloadId 0

VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 1
VCXMV CheckMediaCount E_DRIVE 0

VCXMV CopyMedia C_DRIVE 0 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCopyResp KVCXMYVideosTestMessageCopyOrMoveStarted KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

// Get list of all videos
VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 1
VCXMV CheckMediaCount E_DRIVE 1

// Check attributes

VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
// Size is set by collection after copy.
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralExtSizeInt64 1
// Read-only attribute.
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralDate 3
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralCopyright "c"
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosModifiedDate 4
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosAgeProfile 5
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosAudioLanguage "e"
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosAuthor "f"
allowerrorcodes KERRCORRUPT
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosDuration 7 8
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralLastPlaybackPosition 9 10
VCXMV CheckMediaDetail E_DRIVE 0 EVcxTestMapping_KVcxMediaMyVideosDownloadId 0

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30757 Copy multiple

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create sideloaded video
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video.mp4" 50000 10

VCXMV CheckMediaCount C_DRIVE 10
VCXMV CheckMediaCount E_DRIVE 0

VCXMV CopyMedias C_DRIVE 0 5 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCopyResp KVCXMYVideosTestMessageCopyOrMoveStarted KVCXMYVideosTestMessageCommandComplete
waittestclass VCXMV

// Get list of all videos
VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount C_DRIVE 10
VCXMV CheckMediaCount E_DRIVE 5

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30761 Cancel copy

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video.mp4" 70000 30

VCXMV CheckMediaCount C_DRIVE 30
VCXMV CheckMediaCount E_DRIVE 0

VCXMV CancelNextOperation
VCXMV CopyMedias C_DRIVE 0 30 E_DRIVE 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandCanceled
waittestclass VCXMV

VCXMV CoolDown

// Get list of all videos
VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check that at least few videos have been copied
VCXMV CheckMaximumMediaCount E_DRIVE 25
VCXMV CheckMediaCount C_DRIVE 30

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30803 EVcxMyVideosAllVideos - EVcxMyVideosSortingCreationDate

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check video sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3
VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30805 EVcxMyVideosAllVideos - EVcxMyVideosSortingName

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Check sorting

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30806 EVcxMyVideosAllVideos - EVcxMyVideosSortingSize

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30843 EVcxMyVideosDownloads - EVcxMyVideosSortingName, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30846 EVcxMyVideosDownloads - EVcxMyVideosSortingCreationDate, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingCreationDate

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30848 EVcxMyVideosDownloads - EVcxMyVideosSortingSize, remove video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginDownloaded
callsub SetupVideos

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingSize

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "b"

// Remove one of them

VCXMV RemoveMedia ANY_DRIVE 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30879 EVcxMyVideosOther - EVcxMyVideosSortingName, modify video

callsub Cleanup

var OPTION_ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check count and sort order

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "b"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "c"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "x"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "c"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "a"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "x"

// Modify one of the videos and check order
VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMyVideosTestMessageVideoListOrderChanged KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "a"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30884 EVcxMyVideosOther - EVcxMyVideosSortingName, sideload video

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video3.mp4" 52000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video0.mp4" 50000
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video2.mp4" 51000
pause 1000

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

delete VCXMV

// Get videos sorted

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 3

VCXMV GetAllMediaFullDetails

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

// Sideload video

VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video1.mp4"

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "video0"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "video1"
VCXMV CheckMediaDetail ANY_DRIVE 2 EVcxTestMapping_KMPXMediaGeneralTitle "video2"
VCXMV CheckMediaDetail ANY_DRIVE 3 EVcxTestMapping_KMPXMediaGeneralTitle "video3"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30051 Setup all origins

callsub Cleanup

// TESTCASE START

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "a.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "b.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "c.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "d.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "e.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "f.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "g.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "h.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "i.mp4"
pause 1000
VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "j.mp4"
pause 1000

VCXMV GetAllMediaFullDetails

VCXMV SetAutomaticRefresh 0

// Set 5 videos with new video flag

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginOther"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginCamera"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginCapturedWithCamera
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginDownloaded"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 3
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginSideloaded"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginSideLoaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 4
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginRecording"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginTvRecording
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

// Set next 5 videos with no flags

VCXMV CreateCopyOfMedia ANY_DRIVE 5
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginOther2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 6
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginCamera2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginCapturedWithCamera
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 7
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginDownloaded2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginSideloaded2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginSideLoaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 9
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginRecording2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginTvRecording
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV SetAutomaticRefresh 1

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CoolDown

delete VCXMV

[Endtest]

[Test]
title ET30046 All videos - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 10
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginRecording"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30047 Downloads - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KMPXMediaGeneralTitle "Downloads"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginDownloaded"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30048 TV recordings - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KMPXMediaGeneralTitle "TV recordings"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginRecording"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30049 Captured videos - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KMPXMediaGeneralTitle "Captured videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginCamera"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30050 Other videos - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginSideloaded"

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30023 Setup, DL 2, sideload 18

callsub Cleanup

// TESTCASE START

// Sideload 48 videos and download 2

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CreateVideoFile IptvTestVideo3Gp C_DRIVE "video.mp4" 50000 20

VCXMV CoolDown

VCXMV CreateCopyOfMedia ANY_DRIVE 0 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV SetMedia 1
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionItemChanged
waittestclass VCXMV

delete VCXMV

// Open all videos

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 20

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30024 GetMediasByMpxId - All videos
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetMediasByMpxId 0 20
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageGotMediasByKMpxId
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 20

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30027 GetMediasByMpxId - Few from middle
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetMediasByMpxId 7 13
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageGotMediasByKMpxId
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 6

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

[Test]
title <not a test> Setup default memory

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetPreferredMemory E_DRIVE
delete VCXMV
print OK!
[Endtest]

[Test]
title ET30102 Download 3 videos one by one, 2nd drive

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetPreferredMemory E_DRIVE

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_SMALLVIDEOS 2 0 "mediacharger" "Buran_9o"
VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV // Dl complete

VCXMV Download 3G_AP SERVICE_SMALLVIDEOS 3 0 "mediacharger" "Buran_9o"
VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV // Dl complete

VCXMV Download 3G_AP SERVICE_SMALLVIDEOS 4 0 "mediacharger" "Buran_9o"
VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV // Dl complete

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check video has been loaded, there's one from previous case
VCXMV CheckMediaCount E_DRIVE 3
VCXMV CheckMediaCount C_DRIVE 0

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30103 Download and open downloads category

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Create one sideloaded video
VCXMV CreateVideoFile IptvTestVideoMpeg4 C_DRIVE "video0.mp4"

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Start download
VCXMV Download 3G_AP SERVICE_2 0 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandComplete
waittestclass VCXMV // Dl started

// Get list of downloads
VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlProgressed
waittestclass VCXMV

// Check that there's a download
VCXMV CheckMediaCount ANY_DRIVE 1

VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV // Dl complete

VCXMV CoolDown

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Get list of all videos
VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Downloaded and sideloaded
VCXMV CheckMediaCount ANY_DRIVE 2

print OK!
delete VCXMV
[Endtest]

[Test]
title ET30104 Cancel download

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Start download
VCXMV Download 3G_AP SERVICE_2 20 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV // Dl started

// Cancel it
VCXMV CancelDownload SERVICE_2 20 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDlCanceled
waittestclass VCXMV // Dl canceled

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Should be no videos
VCXMV CheckMediaCount ANY_DRIVE 0

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30105 Pause download

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Start download
VCXMV Download 3G_AP SERVICE_2 20 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV // Command complete

// Pause it
VCXMV PauseDownload SERVICE_2 20 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlPaused
waittestclass VCXMV // Dl paused

VCXMV CheckMediaCount ANY_DRIVE 1

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30111 Pause and resume download

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Start download
VCXMV Download 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

// Pause it
VCXMV PauseDownload SERVICE_2 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlPaused
waittestclass VCXMV // Dl paused

VCXMV ResumeDownload 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV // Dl complete

VCXMV CheckMediaCount ANY_DRIVE 1

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30113 Cancel paused download

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Start download
VCXMV Download 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV // Command complete

// Pause it
VCXMV PauseDownload SERVICE_2 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlPaused
waittestclass VCXMV // Dl paused

// Cancel download
VCXMV CancelDownload SERVICE_2 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDlCanceled
waittestclass VCXMV // Dl canceled

VCXMV CheckMediaCount ANY_DRIVE 0

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30110 Check progress of download

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning KVCXMYVideosTestMessageDlProgressed KVCXMYVideosTestMessageDlProgressed KVCXMYVideosTestMessageDlProgressed
waittestclass VCXMV

VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
waittestclass VCXMV

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30122 Download videos to 2 drives

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV SetPreferredMemory E_DRIVE
pause 2000

VCXMV Download 3G_AP SERVICE_2 0 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV // Command complete

VCXMV SetPreferredMemory C_DRIVE
pause 2000

VCXMV Download 3G_AP SERVICE_SMALLVIDEOS 1 0 "mediacharger" "Buran_9o"

VCXMV WaitAllDownloads
waittestclass VCXMV

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

// Check video has been loaded, there's one from previous case
VCXMV CheckMediaCount E_DRIVE 1
VCXMV CheckMediaCount C_DRIVE 1

print OK!
delete VCXMV
[Endtest]

[Test]
title <not a test> Setup default memory

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetPreferredMemory E_DRIVE
delete VCXMV
print OK!
[Endtest]

[Test]
title ET30317 Download 404

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// TESTCASE START

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV DownloadUrl 3G_AP "http:\/\/193.65.182.78/asdfsdafasasdf.mp3" 0 "mediacharger" "Buran_9o"
VCXMV WaitForAnyMessage 5MINUTES KVCXMYVideosTestMessageDlSucceeded KVCXMYVideosTestMessageDlFailed KVCXMYVideosTestMessageDlGeneral
allownextresult EObjectNotFound
waittestclass VCXMV // Dl complete

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30302 Download, connection disconnects

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

// Test

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetAutoResume 0

// Get list of videos
VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 20 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV // Dl started

loop 3
Util WaitForConnectionActivity 3G_AP
allowerrorcodes KERRTIMEDOUT
waittestclass Util
allowerrorcodes KERRNOTFOUND
allowerrorcodes KERRALREADYEXISTS
Util Attach 3G_AP
allowerrorcodes KERRNOTREADY
Util Terminate
endloop

VCXMV CoolDown

delete VCXMV
[Endtest]

[Test]
title ET30653 3 downloads, Cancel first download

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetPreferredMemory E_DRIVE

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 20 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 2 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

// Cancel download
VCXMV CancelDownload SERVICE_2 20 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDlCanceled
waittestclass VCXMV // Dl canceled

VCXMV WaitAllDownloads
waittestclass VCXMV

VCXMV CheckMediaCount E_DRIVE 2

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30658 3 downloads, Pause and resume second download

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetPreferredMemory E_DRIVE

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 0 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 2 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

// Pause download
VCXMV PauseDownload SERVICE_2 0 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDlPaused
waittestclass VCXMV

VCXMV ResumeDownload 3G_AP SERVICE_2 0 0 "mediacharger" "Buran_9o"

VCXMV WaitAllDownloads
waittestclass VCXMV

VCXMV CheckMediaCount E_DRIVE 3

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

[Test]
title ET30661 3 downloads, pause 1st, cancel 2nd, wait 3rd, resume 1st

create VCXTestUtilModule Util
Util CreateMobilecrashWatcher

callsub Cleanup

create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV SetPreferredMemory E_DRIVE

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 20 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

VCXMV Download 3G_AP SERVICE_2 2 0 "mediacharger" "Buran_9o"
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageDlRunning
waittestclass VCXMV

VCXMV PauseDownload SERVICE_2 1 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDlPaused
waittestclass VCXMV

VCXMV CancelDownload SERVICE_2 20 0
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCommandComplete KVCXMYVideosTestMessageDlCanceled
waittestclass VCXMV

VCXMV WaitAllDownloads
waittestclass VCXMV

VCXMV ResumeDownload 3G_AP SERVICE_2 1 0 "mediacharger" "Buran_9o"

VCXMV WaitAllDownloads
waittestclass VCXMV

VCXMV CheckMediaCount E_DRIVE 2

print OK!
delete VCXMV

Util CheckMobilecrashes
pause 1000
delete Util
[Endtest]

