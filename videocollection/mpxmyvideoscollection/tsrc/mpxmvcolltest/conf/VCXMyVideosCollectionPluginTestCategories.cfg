///*
//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description: 
//*
//*/

#-----------------------------------------------------------------------------------
#
# STIF test script file for testing VCXMyVideosCollectionPluginTest.dll
#
# Tests functionality for category video lists.
#
#-----------------------------------------------------------------------------------

[StifSettings]
CapsModifier= VcxTestClientApiCapsMod.exe
[EndStifSettings]

[Define]
INCLUDE c:\TestFramework\VCXMVCollectionPluginTest.inc
INCLUDE c:\TestFramework\VCXDrives.inc
INCLUDE c:\TestFramework\VCXErrors.inc
[Enddefine]

#************************************************************************************
# Sub Cleanup
# Removes all videos from the phone. Collection is opened.
#************************************************************************************
[Sub Cleanup]
print cleanup start
create  VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV RemoveAllMedia
delete VCXMV

print wait 30sec
pause 30000
print cleanup end
[EndSub]

#************************************************************************************
# Sub SetupVideos
#  Creates 5 videos with defined origin. List will be:
#
# a.mp4
# b.mp4
# c.mp4
# d.mp4
# e.mp4
#
# 2nd and 4th videos have new flag set.
#************************************************************************************
[Sub SetupVideos]

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "a.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "b.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "c.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "d.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "e.mp4"

pause 10000

VCXMV GetAllMediaFullDetails

VCXMV SetAutomaticRefresh 0

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 3
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 4
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin ORIGIN
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

delete VCXMV
[EndSub]

#------------------------------------------------------------------------------------
#
#  Tests opening 'All videos' category when it's empty.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - empty

callsub Cleanup

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 0

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'Downloads' category when it's empty.
#
#------------------------------------------------------------------------------------
[Test]
title Downloads - empty
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 0

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'TV Recordings' category when it's empty.
#
#------------------------------------------------------------------------------------
[Test]
title TV recordings - empty
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosTvRecordings
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 0

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'Captured videos' category when it's empty.
#
#------------------------------------------------------------------------------------
[Test]
title Captured videos - empty
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosCapturedVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 0

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'Other videos' category when it's empty.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - empty
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 0

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Creates five video files, one for every origin. This case is needed by following cases.
#
#------------------------------------------------------------------------------------
[Test]
title Setup all origins

callsub Cleanup

// TESTCASE START

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "a.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "b.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "c.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "d.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "e.mp4"
pause 1000

VCXMV SetAutomaticRefresh 0

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginOther"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginCamera"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginCapturedWithCamera
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginDownloaded"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 3
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginSideloaded"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginSideLoaded
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 4
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginRecording"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginTvRecording
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV SetAutomaticRefresh 1

VCXMV GetAllMediaFullDetails

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'All videos' category when device has videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - all origins
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 5

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'Downloads' category when device has videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title Downloads - all origins
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosDownloads
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 1

VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "OriginDownloaded"

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'TV recordings' category when device has videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title TV recordings - all origins
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosTvRecordings
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 1
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "OriginRecording"

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'Captured videos' category when device has videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title Captured videos - all origins
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosCapturedVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 1
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "OriginCamera"

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests opening 'Other videos' category when device has videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - all origins
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosOther
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaCount ANY_DRIVE 2
VCXMV CheckMediaDetail ANY_DRIVE 0 EVcxTestMapping_KMPXMediaGeneralTitle "OriginOther"
VCXMV CheckMediaDetail ANY_DRIVE 1 EVcxTestMapping_KMPXMediaGeneralTitle "OriginSideloaded"

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Creates two videos for each different origin, one with new flag and one without.
#
#------------------------------------------------------------------------------------
[Test]
title Setup all origins

callsub Cleanup

// TESTCASE START

create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create
VCXMV SetSortingOrder EVcxMyVideosSortingName

VCXMV SetFileCheck 0

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV OpenLevel EVcxMyVideosAllVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

// Create some video objects.
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "a.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "b.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "c.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "d.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "e.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "f.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "g.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "h.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "i.mp4"
pause 1000
VCXMV CreateVideoFile VcxTestVideo3Gp DRIVE_1 "j.mp4"
pause 1000

VCXMV GetAllMediaFullDetails

VCXMV SetAutomaticRefresh 0

// Set 5 videos with new video flag

VCXMV CreateCopyOfMedia ANY_DRIVE 0
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginOther"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 1
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginCamera"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginCapturedWithCamera
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 2
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginDownloaded"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 3
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginSideloaded"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginSideLoaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 4
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginRecording"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginTvRecording
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosModifiedDateCurrent
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

// Set next 5 videos with no flags

VCXMV CreateCopyOfMedia ANY_DRIVE 5
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginOther2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginOther
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 6
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginCamera2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginCapturedWithCamera
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 7
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginDownloaded2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginDownloaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 8
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginSideloaded2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginSideLoaded
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV CreateCopyOfMedia ANY_DRIVE 9
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralTitle "OriginRecording2"
VCXMV SetMediaDetail EVcxTestMapping_KVcxMediaMyVideosOrigin EVcxMyVideosOriginTvRecording
VCXMV SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV OutsideMediaUpdate
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV

VCXMV SetAutomaticRefresh 1

VCXMV RefreshContents
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV GetAllMediaFullDetails

VCXMV CloseLevel
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CoolDown

delete VCXMV

[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'All videos' has correct details when there's videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 10
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginRecording"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Downloads' has correct details when there's videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title Downloads - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KMPXMediaGeneralTitle "Downloads"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosDownloads EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginDownloaded"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'TV recorgins' has correct details when there's videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title TV recordings - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KMPXMediaGeneralTitle "TV recordings"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosTvRecordings EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginRecording"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Captured videos' has correct details when there's videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title Captured videos - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KMPXMediaGeneralTitle "Captured videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosCapturedVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginCamera"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Other videos' has correct details when there's videos with different origins.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - category details
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageListComplete
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "OriginSideloaded"

print OK!
delete VCXMV
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Other videos' details are updated when videos are deleted.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - video is deleted, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it doesn't have new flag.
VCXMV2 DeleteMedia ANY_DRIVE 4 0

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it has new flag.
VCXMV2 DeleteMedia ANY_DRIVE 3 0

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 3
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Other videos' details are updated when videos are added by sideloading.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - video is sideloaded, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

VCXMV2 CreateVideoFile VcxTestVideo3Gp DRIVE_1 "1.mp4"
pause 500
VCXMV2 CreateVideoFile VcxTestVideo3Gp DRIVE_1 "2.mp4"
pause 5000
VCXMV2 CreateVideoFile VcxTestVideo3Gp DRIVE_1 "3.mp4"

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 8
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "3"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Other videos' details are updated when videos are removed.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - video is removed, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it doesn't have new flag.
VCXMV2 RemoveMedia ANY_DRIVE 4 0
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it has new flag.
VCXMV2 RemoveMedia ANY_DRIVE 3 0
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 3
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Other videos' details are updated when the file of a video deleted.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - file of a video is deleted, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it doesn't have new flag.
VCXMV2 DeleteFileOfMedia ANY_DRIVE 4
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it has new flag.
VCXMV2 DeleteFileOfMedia ANY_DRIVE 3
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 3
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'Other videos' details are updated when new flag of a video is modified.
#
#------------------------------------------------------------------------------------
[Test]
title Other videos - video new flag is modified, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Set new flag off for a media.
VCXMV2 CreateCopyOfMedia ANY_DRIVE 3
VCXMV2 SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV2 SetMedia 1
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV2

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

// Set new flag on for another media.
VCXMV2 CreateCopyOfMedia ANY_DRIVE 4
VCXMV2 SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV2 SetMedia 1
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV2

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KMPXMediaGeneralTitle "Other"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosOther EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "e"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'All videos' details are updated when video is deleted.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - video is deleted, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it doesn't have new flag.
VCXMV2 DeleteMedia ANY_DRIVE 4 0

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it has new flag.
VCXMV2 DeleteMedia ANY_DRIVE 3 0

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 3
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'All videos' details are updated when video is added by sideloading.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - video is sideloaded, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

VCXMV2 CreateVideoFile VcxTestVideo3Gp DRIVE_1 "1.mp4"
pause 500
VCXMV2 CreateVideoFile VcxTestVideo3Gp DRIVE_1 "2.mp4"
pause 5000
VCXMV2 CreateVideoFile VcxTestVideo3Gp DRIVE_1 "3.mp4"

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 8
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "3"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'All videos' details are updated when video is removed.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - video is removed, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it doesn't have new flag.
VCXMV2 RemoveMedia ANY_DRIVE 4 0
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it has new flag.
VCXMV2 RemoveMedia ANY_DRIVE 3 0
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 3
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'All videos' details are updated when file of a video is deleted.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - video file is deleted, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it doesn't have new flag.
VCXMV2 DeleteFileOfMedia ANY_DRIVE 4
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 4
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Delete last media, it has new flag.
VCXMV2 DeleteFileOfMedia ANY_DRIVE 3
VCXMV2 CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 3
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]

#------------------------------------------------------------------------------------
#
#  Tests that category 'All videos' details are updated when new flag of a video is modified.
#
#------------------------------------------------------------------------------------
[Test]
title All videos - video new flag is modified, category details

var ORIGIN EVcxMyVideosOriginOther
callsub SetupVideos

// Create client to modify videos.
create VCXMyVideosCollectionPluginTest VCXMV2
VCXMV2 Create
VCXMV2 OpenCollection VCXCollectionMyVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV2
VCXMV2 OpenLevel EVcxMyVideosAllVideos
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened KVCXMYVideosTestMessageListComplete
waittestclass VCXMV2

// And second client to check categories.
create VCXMyVideosCollectionPluginTest VCXMV
VCXMV Create

VCXMV OpenCollection VCXCollectionMyVideos
VCXMV WaitForMessages 1MINUTE KVCXMYVideosTestMessageCollectionOpened
waittestclass VCXMV

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "d"

// Set new flag off for a media.
VCXMV2 CreateCopyOfMedia ANY_DRIVE 3
VCXMV2 SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags 0
VCXMV2 SetMedia 1
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV2

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 1
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "b"

// Set new flag on for another media.
VCXMV2 CreateCopyOfMedia ANY_DRIVE 4
VCXMV2 SetMediaDetail EVcxTestMapping_KMPXMediaGeneralFlags EVcxMyVideosVideoNew
VCXMV2 SetMedia 1
VCXMV2 WaitForMessages 1MINUTE KVCXMYVideosTestMessageMpxVideoModified
waittestclass VCXMV2

VCXMV CoolDown

VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KMPXMediaGeneralTitle "All videos"
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryItemCount 5
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemCount 2
VCXMV CheckMediaDetail ANY_DRIVE EVcxMyVideosAllVideos EVcxTestMapping_KVcxMediaMyVideosCategoryNewItemName "e"

print OK!
delete VCXMV
delete VCXMV2
[Endtest]
